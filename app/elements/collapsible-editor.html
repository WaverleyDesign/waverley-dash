<dom-module id="collapsible-editor">
  <template>
    <style include="shared-styles"></style>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
    .toggle {
      width: 100%;
      height: 32px;
    }
    .toggle-tall {
      width: 100%;
      height: 64px;
    }
    paper-input.big {
      --paper-input-container-input: {
        font-size: 36px;
      };
    }

    text-editor {
      --toolbar-color: var(--dark-accent-color);
    }

    .editor-toolbar {
      padding: 16px;
      @apply(--layout-horizontal);
      @apply(--layout-end);
      background-color: var(--accent-color);
    }

    .divOne {
      width: 60%;
    }
    .divTwo {
      width: 40%;
    }

    </style>

    <paper-material elevation="1">
      <iron-collapse opened id="collapsePanel">
        <div class="toggle horizontal layout wrap" on-tap="toggle">
          <p>
            {{title}}
          </p>
          <span class="flex"></span>
        </div>
      </iron-collapse>

      <iron-collapse id="collapse">
        <div class="horizontal layout editor-toolbar">
          <div class="divOne">
            <paper-input no-label-float label="Title" class="big" value="{{title}}"></paper-input>
          </div>
          <div class="vertical layout divTwo">
            <div class="end-justified horizontal layout">
              <paper-icon-button icon="close" on-tap="toggle"></paper-icon-button>
            </div>
            <div class="end-justified horizontal layout">
              <p class="date">{{date}}</p>
            </div>
          </div>
        </div>
          <text-editor hide-title-editor="true" html="{{html}}" title="{{title}}" author="{{author}}">
            <paper-button raised on-tap="submit">SUBMIT</paper-button>
          </text-editor>
      </iron-collapse>
    </paper-material>




  </template>
  <script>
    Polymer({
      is: 'collapsible-editor',
      properties: {
        title: {
          type: String,
          notify: true
        },
        author: {
          type: String,
          notify: true
        },
        html: {
          type: String,
          notify: true
        },
        postObject: {
          type: Object,
          notify: true
        }
      },
      toggle: function() {
        this.$.collapse.toggle();
        this.$.collapsePanel.toggle();
      },
      submit: function() {
        // var post = new Object();
        // post.html = this.html;
        // post.title = this.title;
        // post.author = this.author;
        // var ref = new Firebase('https://waverleydash.firebaseio.com/blog/posts/' + post.title);
        // ref.set(post);
        // this.postObject = {title: this.title, author: this.title, html: this.html};
        // this.fire('update-post', this.postObject);
      //  console.log(this.postObject);
      },
    });
  </script>
</dom-module>
