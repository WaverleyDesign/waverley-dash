<dom-module id="collapsible-editor">
  <template>
    <style include="shared-styles"></style>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
    .toggle {
      width: 100%;
      height: 32px;
      border: 1px solid var(--accent-color);
    }
    .toggle-tall {
      width: 100%;
      height: 64px;
      border: 1px solid var(--accent-color);
    }
    paper-input.big {
      --paper-input-container-input: {
        font-size: 48px;
      };
    }

    </style>

    <iron-collapse opened id="collapsePanel">
      <div class="toggle horizontal layout wrap" on-tap="toggle" >
        <p>
          {{title}}
        </p>
        <span class="flex"></span>
      </div>
    </iron-collapse>

    <iron-collapse id="collapse">
      <div>
        <paper-input label="" class="big" value="{{title}}"></paper-input>
        <paper-icon-button icon="close" on-tap="toggle"></paper-icon-button>
      </div>
        <text-editor hide-title-editor="true" html="{{html}}" title="{{title}}" author="{{author}}">
          <paper-button raised on-tap="submit">SUBMIT</paper-button>
        </text-editor>
    </iron-collapse>



  </template>
  <script>
    Polymer({
      is: 'collapsible-editor',
      properties: {
        title: {
          type: String,
        },
        author: {
          type: String,
        },
        html: {
          type: String,
        },
      },
      toggle: function() {
        this.$.collapse.toggle();
        this.$.collapsePanel.toggle();
      },
      submit: function() {
        var post = new Object();
        post.html = this.html;
        post.title = this.title;
        post.author = this.author;
        var ref = new Firebase('https://waverleydash.firebaseio.com/blog/posts/' + post.title);
        ref.set(post);
      },
    });
  </script>
</dom-module>
