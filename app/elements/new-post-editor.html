<dom-module id="new-post-editor">
  <template>
    <style include="shared-styles"></style>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
      div [hidden] !important {
        display: none;
      }
    </style>

    <div hidden="{{hidden}}">

      <text-editor html="{{html}}" title="{{title}}" author="{{author}}">
        <paper-button raised on-tap="submit">Submit</paper-button>
      </text-editor>

      <paper-dialog id="dialog">
        <h2>Confirm Submit</h2>
        <p>
          All good to post?
        </p>
        <div class="buttons">
          <paper-button dialog-accept on-tap="confirmSubmit">Confirm</paper-button>
          <paper-button dialog-dismiss>keep editing</paper-button>
        </div>
      </paper-dialog>

    </div>

  </template>
  <script>
    Polymer({
      is: 'new-post-editor',
      properties: {
        hidden: {
          type: Boolean,
          value: true
        },
      },
      newPost: function() {
        if (this.hidden == true) {
          this.hidden = false;
        } else if (this.hidden == false) {
          this.hidden = true;
        }
      },
      submit: function() {
        this.$.dialog.toggle();
      },
      confirmSubmit: function() {
        var post = new Object();
        post.title = this.title;
        post.author = this.author;
        post.html = this.html;
        post.date = new Date();
        var ref = new Firebase('https://waverleydash.firebaseio.com/blog/posts/');
        ref.push(post)
      },
    });
  </script>
</dom-module>
